{"filter":false,"title":"boto3_use_algorithm.py","tooltip":"/aws_services_py/boto3_use_algorithm.py","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":118,"column":4},"end":{"row":118,"column":5},"action":"insert","lines":["#"],"id":985}],[{"start":{"row":124,"column":4},"end":{"row":124,"column":5},"action":"insert","lines":["#"],"id":986}],[{"start":{"row":74,"column":4},"end":{"row":74,"column":5},"action":"insert","lines":["#"],"id":987}],[{"start":{"row":65,"column":4},"end":{"row":65,"column":5},"action":"insert","lines":["#"],"id":988}],[{"start":{"row":24,"column":33},"end":{"row":25,"column":0},"action":"insert","lines":["",""],"id":989},{"start":{"row":25,"column":0},"end":{"row":25,"column":1},"action":"insert","lines":["t"]},{"start":{"row":25,"column":1},"end":{"row":25,"column":2},"action":"insert","lines":["y"]},{"start":{"row":25,"column":2},"end":{"row":25,"column":3},"action":"insert","lines":["p"]},{"start":{"row":25,"column":3},"end":{"row":25,"column":4},"action":"insert","lines":["e"]}],[{"start":{"row":25,"column":4},"end":{"row":25,"column":5},"action":"insert","lines":["_"],"id":990}],[{"start":{"row":25,"column":5},"end":{"row":25,"column":6},"action":"insert","lines":[" "],"id":991},{"start":{"row":25,"column":6},"end":{"row":25,"column":7},"action":"insert","lines":["="]}],[{"start":{"row":25,"column":7},"end":{"row":25,"column":8},"action":"insert","lines":[" "],"id":992},{"start":{"row":25,"column":8},"end":{"row":25,"column":9},"action":"insert","lines":["r"]},{"start":{"row":25,"column":9},"end":{"row":25,"column":10},"action":"insert","lines":["e"]},{"start":{"row":25,"column":10},"end":{"row":25,"column":11},"action":"insert","lines":["g"]},{"start":{"row":25,"column":11},"end":{"row":25,"column":12},"action":"insert","lines":["r"]}],[{"start":{"row":25,"column":11},"end":{"row":25,"column":12},"action":"remove","lines":["r"],"id":993},{"start":{"row":25,"column":10},"end":{"row":25,"column":11},"action":"remove","lines":["g"]},{"start":{"row":25,"column":9},"end":{"row":25,"column":10},"action":"remove","lines":["e"]},{"start":{"row":25,"column":8},"end":{"row":25,"column":9},"action":"remove","lines":["r"]}],[{"start":{"row":25,"column":8},"end":{"row":25,"column":10},"action":"insert","lines":["''"],"id":994}],[{"start":{"row":25,"column":9},"end":{"row":25,"column":10},"action":"insert","lines":["l"],"id":995},{"start":{"row":25,"column":10},"end":{"row":25,"column":11},"action":"insert","lines":["o"]},{"start":{"row":25,"column":11},"end":{"row":25,"column":12},"action":"insert","lines":["g"]},{"start":{"row":25,"column":12},"end":{"row":25,"column":13},"action":"insert","lines":["i"]},{"start":{"row":25,"column":13},"end":{"row":25,"column":14},"action":"insert","lines":["s"]},{"start":{"row":25,"column":14},"end":{"row":25,"column":15},"action":"insert","lines":["t"]},{"start":{"row":25,"column":15},"end":{"row":25,"column":16},"action":"insert","lines":["i"]},{"start":{"row":25,"column":16},"end":{"row":25,"column":17},"action":"insert","lines":["c"]},{"start":{"row":25,"column":17},"end":{"row":25,"column":18},"action":"insert","lines":["a"]},{"start":{"row":25,"column":18},"end":{"row":25,"column":19},"action":"insert","lines":["l"]}],[{"start":{"row":25,"column":19},"end":{"row":25,"column":20},"action":"insert","lines":[" "],"id":996},{"start":{"row":25,"column":20},"end":{"row":25,"column":21},"action":"insert","lines":["r"]},{"start":{"row":25,"column":21},"end":{"row":25,"column":22},"action":"insert","lines":["e"]},{"start":{"row":25,"column":22},"end":{"row":25,"column":23},"action":"insert","lines":["g"]},{"start":{"row":25,"column":23},"end":{"row":25,"column":24},"action":"insert","lines":["r"]},{"start":{"row":25,"column":24},"end":{"row":25,"column":25},"action":"insert","lines":["e"]},{"start":{"row":25,"column":25},"end":{"row":25,"column":26},"action":"insert","lines":["s"]},{"start":{"row":25,"column":26},"end":{"row":25,"column":27},"action":"insert","lines":["s"]},{"start":{"row":25,"column":27},"end":{"row":25,"column":28},"action":"insert","lines":["i"]},{"start":{"row":25,"column":28},"end":{"row":25,"column":29},"action":"insert","lines":["o"]},{"start":{"row":25,"column":29},"end":{"row":25,"column":30},"action":"insert","lines":["n"]}],[{"start":{"row":121,"column":85},"end":{"row":121,"column":86},"action":"insert","lines":[","],"id":997}],[{"start":{"row":121,"column":86},"end":{"row":121,"column":87},"action":"insert","lines":[" "],"id":998}],[{"start":{"row":121,"column":87},"end":{"row":121,"column":89},"action":"insert","lines":["''"],"id":999}],[{"start":{"row":121,"column":88},"end":{"row":121,"column":89},"action":"insert","lines":["t"],"id":1000},{"start":{"row":121,"column":89},"end":{"row":121,"column":90},"action":"insert","lines":["y"]},{"start":{"row":121,"column":90},"end":{"row":121,"column":91},"action":"insert","lines":["p"]},{"start":{"row":121,"column":91},"end":{"row":121,"column":92},"action":"insert","lines":["e"]}],[{"start":{"row":121,"column":93},"end":{"row":121,"column":94},"action":"insert","lines":[" "],"id":1001},{"start":{"row":121,"column":94},"end":{"row":121,"column":95},"action":"insert","lines":[":"]}],[{"start":{"row":121,"column":95},"end":{"row":121,"column":96},"action":"insert","lines":[" "],"id":1002}],[{"start":{"row":121,"column":96},"end":{"row":121,"column":101},"action":"insert","lines":["type_"],"id":1003}],[{"start":{"row":121,"column":101},"end":{"row":121,"column":102},"action":"insert","lines":[" "],"id":1004}],[{"start":{"row":121,"column":92},"end":{"row":121,"column":93},"action":"insert","lines":["_"],"id":1005}],[{"start":{"row":127,"column":0},"end":{"row":128,"column":0},"action":"insert","lines":["",""],"id":1006}],[{"start":{"row":128,"column":0},"end":{"row":210,"column":22},"action":"insert","lines":["def run_algo(user_id = '33u8913nffjo512gss11' ):","    print(\"in boto3_use_algorithm.get_algo\")","    # get algorithm data based off algo_id","    query = f\"SELECT * FROM stats.ml_algorithms a join stats.ml_coefficients c on a.id = c.id where a.id = '{algo_id}';\"","    algo_data = mysql.run_sql_query(query)","    ","    #print('algo_data')","    sql_used = (algo_data[\"sql_used\"][0])","    y_col = (algo_data[\"y_col\"][0])","    ","    index = sql_used.find(\"WHERE\")","    try:","        if(index > 1):","            print(index)","    except Exception as e:","        # Handle any other exceptions","        print(\"An error occurred there is no 'WHERE' in sql_used: \", e)","        raise CustomError(\"An error occurred there is no 'WHERE' in sql_used\")","    # Split the string at the specified index","    part1 = sql_used[:index]","    part2 = sql_used[index:]","    sql_user = f\"{part1} where transaction_id = '{user_id}' \" ","    #print('sql_user',sql_user)","    # convert known problem numbers stored as objects","    df = mysql.run_sql_query(sql_user)","    df['months'] = df['months'].astype(float)","    df['complete_sales_a'] = df['complete_sales_a'].astype(float)","    ","    #one-hot encoding","    one_hot_encode_cols = df.dtypes[df.dtypes == object]  # filtering by string categoricals","    one_hot_encode_cols = one_hot_encode_cols.index.tolist()  # list of categorical fields","    #print('one_hot_encode_cols',one_hot_encode_cols)","    # Encode these columns as categoricals so one hot encoding works on split data (if desired)","    for col in one_hot_encode_cols:","        df[col] = pd.Categorical(df[col])","    # Do the one hot encoding","    df = pd.get_dummies(df, columns=one_hot_encode_cols)","    ","    ","    #load model based off file name","    loaded_transformation = joblib.load(f'{algo_id}_fit_transform.joblib')","    ## THESE PARAMETERS MUST BE PRESENT IN the test data : parameters_t","    parameters_t = loaded_transformation.get_feature_names_out()","    ","    # Add columns if they don't exist","    df = add_columns_if_not_exist(df, parameters_t)","    ","    #load model based off file name","    loaded_algo = joblib.load(f'{algo_id}.joblib')","    parameters = loaded_algo.get_params()","    ","    # drop y_col to remove the determinate variable","    if y_col in df.columns:","        X = df.drop(y_col, axis=1)","    else:","        X=df","    ","    # List of columns to keep","    columns_to_keep = parameters_t","    ","    # Remove columns not in the list","    X = remove_columns_not_in_list(X, columns_to_keep)","    ","    # Reorder the columns","    X = reorder_columns(X, parameters_t)","    ","    # run transformation model","    X_transformed = loaded_transformation.transform(X)","    #print('predictors_t: ', parameters_t )","    #print('X_transformed: ', X_transformed )","    #remove NAN","    X_transformed = np.nan_to_num(X_transformed, nan=0)","    #print('X_transformed: ', X_transformed )","    #make prediction","    pred = loaded_algo.predict(X_transformed)","    #print(\"pred\", pred)","    return_object = {}","    return_object.update({'prediction': pred, 'user_id': user_id, 'algo_id' : algo_id, 'type_' : type_ })","    #return_object['prediction'] = pred","    #pred_string = np.array2string(pred)","    pred_string = return_object","    #print(\"pred_string\", pred_string)","    return pred_string"],"id":1007}],[{"start":{"row":210,"column":22},"end":{"row":211,"column":0},"action":"insert","lines":["",""],"id":1008},{"start":{"row":211,"column":0},"end":{"row":211,"column":4},"action":"insert","lines":["    "]},{"start":{"row":211,"column":4},"end":{"row":212,"column":0},"action":"insert","lines":["",""]},{"start":{"row":212,"column":0},"end":{"row":212,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":128,"column":12},"end":{"row":128,"column":13},"action":"insert","lines":["_"],"id":1009},{"start":{"row":128,"column":13},"end":{"row":128,"column":14},"action":"insert","lines":["o"]},{"start":{"row":128,"column":14},"end":{"row":128,"column":15},"action":"insert","lines":["n"]},{"start":{"row":128,"column":15},"end":{"row":128,"column":16},"action":"insert","lines":["_"]},{"start":{"row":128,"column":16},"end":{"row":128,"column":17},"action":"insert","lines":["a"]},{"start":{"row":128,"column":17},"end":{"row":128,"column":18},"action":"insert","lines":["l"]},{"start":{"row":128,"column":18},"end":{"row":128,"column":19},"action":"insert","lines":["l"]}],[{"start":{"row":214,"column":4},"end":{"row":214,"column":12},"action":"remove","lines":["run_algo"],"id":1010},{"start":{"row":214,"column":4},"end":{"row":214,"column":19},"action":"insert","lines":["run_algo_on_all"]}],[{"start":{"row":149,"column":62},"end":{"row":150,"column":0},"action":"insert","lines":["",""],"id":1011},{"start":{"row":150,"column":0},"end":{"row":150,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":150,"column":4},"end":{"row":150,"column":12},"action":"insert","lines":["sql_user"],"id":1012}],[{"start":{"row":150,"column":12},"end":{"row":150,"column":13},"action":"insert","lines":[" "],"id":1013}],[{"start":{"row":150,"column":13},"end":{"row":150,"column":61},"action":"insert","lines":[" f\"{part1} where transaction_id = '{user_id}' \" "],"id":1014}],[{"start":{"row":149,"column":4},"end":{"row":149,"column":5},"action":"insert","lines":["#"],"id":1015}],[{"start":{"row":150,"column":30},"end":{"row":150,"column":44},"action":"remove","lines":["transaction_id"],"id":1016},{"start":{"row":150,"column":30},"end":{"row":150,"column":31},"action":"insert","lines":["d"]},{"start":{"row":150,"column":31},"end":{"row":150,"column":32},"action":"insert","lines":["a"]},{"start":{"row":150,"column":32},"end":{"row":150,"column":33},"action":"insert","lines":["t"]},{"start":{"row":150,"column":33},"end":{"row":150,"column":34},"action":"insert","lines":["a"]},{"start":{"row":150,"column":34},"end":{"row":150,"column":35},"action":"insert","lines":["_"]},{"start":{"row":150,"column":35},"end":{"row":150,"column":36},"action":"insert","lines":["t"]},{"start":{"row":150,"column":36},"end":{"row":150,"column":37},"action":"insert","lines":["y"]},{"start":{"row":150,"column":37},"end":{"row":150,"column":38},"action":"insert","lines":["p"]},{"start":{"row":150,"column":38},"end":{"row":150,"column":39},"action":"insert","lines":["e"]}],[{"start":{"row":150,"column":39},"end":{"row":150,"column":40},"action":"insert","lines":["="],"id":1017}],[{"start":{"row":150,"column":40},"end":{"row":150,"column":41},"action":"insert","lines":[" "],"id":1018},{"start":{"row":150,"column":41},"end":{"row":150,"column":42},"action":"insert","lines":["'"]},{"start":{"row":150,"column":42},"end":{"row":150,"column":43},"action":"insert","lines":["u"]}],[{"start":{"row":150,"column":43},"end":{"row":150,"column":44},"action":"insert","lines":["'"],"id":1019}],[{"start":{"row":150,"column":44},"end":{"row":150,"column":58},"action":"remove","lines":[" = '{user_id}'"],"id":1020},{"start":{"row":150,"column":44},"end":{"row":150,"column":45},"action":"insert","lines":[" "]},{"start":{"row":150,"column":45},"end":{"row":150,"column":46},"action":"insert","lines":["l"]},{"start":{"row":150,"column":46},"end":{"row":150,"column":47},"action":"insert","lines":["i"]},{"start":{"row":150,"column":47},"end":{"row":150,"column":48},"action":"insert","lines":["m"]},{"start":{"row":150,"column":48},"end":{"row":150,"column":49},"action":"insert","lines":["i"]},{"start":{"row":150,"column":49},"end":{"row":150,"column":50},"action":"insert","lines":["t"]}],[{"start":{"row":150,"column":50},"end":{"row":150,"column":51},"action":"insert","lines":[" "],"id":1021},{"start":{"row":150,"column":51},"end":{"row":150,"column":52},"action":"insert","lines":["5"]}],[{"start":{"row":150,"column":42},"end":{"row":150,"column":43},"action":"remove","lines":["u"],"id":1022},{"start":{"row":150,"column":42},"end":{"row":150,"column":43},"action":"insert","lines":["U"]}],[{"start":{"row":150,"column":39},"end":{"row":150,"column":40},"action":"insert","lines":[" "],"id":1023}],[{"start":{"row":150,"column":13},"end":{"row":150,"column":14},"action":"insert","lines":["="],"id":1024}],[{"start":{"row":129,"column":34},"end":{"row":129,"column":42},"action":"remove","lines":["get_algo"],"id":1025},{"start":{"row":129,"column":34},"end":{"row":129,"column":49},"action":"insert","lines":["run_algo_on_all"]}],[{"start":{"row":201,"column":4},"end":{"row":201,"column":5},"action":"remove","lines":["#"],"id":1026}],[{"start":{"row":204,"column":4},"end":{"row":204,"column":5},"action":"remove","lines":["#"],"id":1027}],[{"start":{"row":153,"column":38},"end":{"row":154,"column":0},"action":"insert","lines":["",""],"id":1028},{"start":{"row":154,"column":0},"end":{"row":154,"column":4},"action":"insert","lines":["    "]},{"start":{"row":154,"column":4},"end":{"row":155,"column":0},"action":"insert","lines":["",""]},{"start":{"row":155,"column":0},"end":{"row":155,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":154,"column":4},"end":{"row":154,"column":5},"action":"insert","lines":["p"],"id":1029},{"start":{"row":154,"column":5},"end":{"row":154,"column":6},"action":"insert","lines":["r"]},{"start":{"row":154,"column":6},"end":{"row":154,"column":7},"action":"insert","lines":["i"]},{"start":{"row":154,"column":7},"end":{"row":154,"column":8},"action":"insert","lines":["n"]},{"start":{"row":154,"column":8},"end":{"row":154,"column":9},"action":"insert","lines":["t"]}],[{"start":{"row":154,"column":9},"end":{"row":154,"column":11},"action":"insert","lines":["()"],"id":1030}],[{"start":{"row":154,"column":10},"end":{"row":154,"column":11},"action":"insert","lines":["d"],"id":1031},{"start":{"row":154,"column":11},"end":{"row":154,"column":12},"action":"insert","lines":["f"]},{"start":{"row":154,"column":12},"end":{"row":154,"column":13},"action":"insert","lines":[","]},{"start":{"row":154,"column":13},"end":{"row":154,"column":14},"action":"insert","lines":["d"]},{"start":{"row":154,"column":14},"end":{"row":154,"column":15},"action":"insert","lines":["f"]}],[{"start":{"row":154,"column":10},"end":{"row":154,"column":11},"action":"insert","lines":["'"],"id":1032}],[{"start":{"row":154,"column":13},"end":{"row":154,"column":14},"action":"insert","lines":["'"],"id":1033}],[{"start":{"row":52,"column":35},"end":{"row":53,"column":0},"action":"insert","lines":["",""],"id":1034},{"start":{"row":53,"column":0},"end":{"row":53,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":53,"column":4},"end":{"row":53,"column":35},"action":"insert","lines":["y_col = (algo_data[\"y_col\"][0])"],"id":1035}],[{"start":{"row":53,"column":4},"end":{"row":53,"column":9},"action":"remove","lines":["y_col"],"id":1036},{"start":{"row":53,"column":4},"end":{"row":53,"column":5},"action":"insert","lines":["t"]},{"start":{"row":53,"column":5},"end":{"row":53,"column":6},"action":"insert","lines":["y"]},{"start":{"row":53,"column":6},"end":{"row":53,"column":7},"action":"insert","lines":["p"]},{"start":{"row":53,"column":7},"end":{"row":53,"column":8},"action":"insert","lines":["e"]},{"start":{"row":53,"column":8},"end":{"row":53,"column":9},"action":"insert","lines":["_"]}],[{"start":{"row":53,"column":24},"end":{"row":53,"column":29},"action":"remove","lines":["y_col"],"id":1037},{"start":{"row":53,"column":24},"end":{"row":53,"column":25},"action":"insert","lines":["t"]},{"start":{"row":53,"column":25},"end":{"row":53,"column":26},"action":"insert","lines":["y"]},{"start":{"row":53,"column":26},"end":{"row":53,"column":27},"action":"insert","lines":["p"]},{"start":{"row":53,"column":27},"end":{"row":53,"column":28},"action":"insert","lines":["e"]}],[{"start":{"row":137,"column":35},"end":{"row":138,"column":0},"action":"insert","lines":["",""],"id":1038},{"start":{"row":138,"column":0},"end":{"row":138,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":138,"column":4},"end":{"row":138,"column":34},"action":"insert","lines":["type_ = (algo_data[\"type\"][0])"],"id":1039}],[{"start":{"row":23,"column":12},"end":{"row":23,"column":33},"action":"remove","lines":["1713801011_Logistical"],"id":1040},{"start":{"row":23,"column":12},"end":{"row":23,"column":33},"action":"insert","lines":["1714657016_Logistical"]}],[{"start":{"row":150,"column":28},"end":{"row":151,"column":0},"action":"insert","lines":["",""],"id":1041},{"start":{"row":151,"column":0},"end":{"row":151,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":153,"column":30},"end":{"row":153,"column":31},"action":"remove","lines":[" "],"id":1042},{"start":{"row":153,"column":29},"end":{"row":153,"column":30},"action":"remove","lines":["e"]},{"start":{"row":153,"column":28},"end":{"row":153,"column":29},"action":"remove","lines":["r"]},{"start":{"row":153,"column":27},"end":{"row":153,"column":28},"action":"remove","lines":["e"]},{"start":{"row":153,"column":26},"end":{"row":153,"column":27},"action":"remove","lines":["h"]},{"start":{"row":153,"column":25},"end":{"row":153,"column":26},"action":"remove","lines":["w"]}],[{"start":{"row":151,"column":4},"end":{"row":151,"column":5},"action":"insert","lines":["p"],"id":1043},{"start":{"row":151,"column":5},"end":{"row":151,"column":6},"action":"insert","lines":["r"]},{"start":{"row":151,"column":6},"end":{"row":151,"column":7},"action":"insert","lines":["i"]},{"start":{"row":151,"column":7},"end":{"row":151,"column":8},"action":"insert","lines":["n"]},{"start":{"row":151,"column":8},"end":{"row":151,"column":9},"action":"insert","lines":["t"]}],[{"start":{"row":151,"column":9},"end":{"row":151,"column":11},"action":"insert","lines":["()"],"id":1044}],[{"start":{"row":151,"column":10},"end":{"row":151,"column":11},"action":"insert","lines":["p"],"id":1045},{"start":{"row":151,"column":11},"end":{"row":151,"column":12},"action":"insert","lines":["a"]},{"start":{"row":151,"column":12},"end":{"row":151,"column":13},"action":"insert","lines":["r"]},{"start":{"row":151,"column":13},"end":{"row":151,"column":14},"action":"insert","lines":["t"]},{"start":{"row":151,"column":14},"end":{"row":151,"column":15},"action":"insert","lines":["1"]}],[{"start":{"row":151,"column":15},"end":{"row":151,"column":16},"action":"insert","lines":[","],"id":1046},{"start":{"row":151,"column":16},"end":{"row":151,"column":17},"action":"insert","lines":["p"]},{"start":{"row":151,"column":17},"end":{"row":151,"column":18},"action":"insert","lines":["a"]},{"start":{"row":151,"column":18},"end":{"row":151,"column":19},"action":"insert","lines":["t"]}],[{"start":{"row":151,"column":18},"end":{"row":151,"column":19},"action":"remove","lines":["t"],"id":1047}],[{"start":{"row":151,"column":18},"end":{"row":151,"column":19},"action":"insert","lines":["r"],"id":1048},{"start":{"row":151,"column":19},"end":{"row":151,"column":20},"action":"insert","lines":["t"]},{"start":{"row":151,"column":20},"end":{"row":151,"column":21},"action":"insert","lines":["1"]}],[{"start":{"row":151,"column":10},"end":{"row":151,"column":11},"action":"insert","lines":["'"],"id":1049}],[{"start":{"row":151,"column":16},"end":{"row":151,"column":17},"action":"insert","lines":["'"],"id":1050}],[{"start":{"row":153,"column":25},"end":{"row":153,"column":26},"action":"insert","lines":["a"],"id":1051},{"start":{"row":153,"column":26},"end":{"row":153,"column":27},"action":"insert","lines":["n"]},{"start":{"row":153,"column":27},"end":{"row":153,"column":28},"action":"insert","lines":["d"]}],[{"start":{"row":153,"column":28},"end":{"row":153,"column":29},"action":"insert","lines":[" "],"id":1052}],[{"start":{"row":157,"column":17},"end":{"row":157,"column":19},"action":"insert","lines":["[]"],"id":1053}],[{"start":{"row":157,"column":18},"end":{"row":157,"column":19},"action":"insert","lines":["t"],"id":1054},{"start":{"row":157,"column":19},"end":{"row":157,"column":20},"action":"insert","lines":["r"]},{"start":{"row":157,"column":20},"end":{"row":157,"column":21},"action":"insert","lines":["a"]},{"start":{"row":157,"column":21},"end":{"row":157,"column":22},"action":"insert","lines":["n"]},{"start":{"row":157,"column":22},"end":{"row":157,"column":23},"action":"insert","lines":["s"]},{"start":{"row":157,"column":23},"end":{"row":157,"column":24},"action":"insert","lines":["a"]},{"start":{"row":157,"column":24},"end":{"row":157,"column":25},"action":"insert","lines":["c"]},{"start":{"row":157,"column":25},"end":{"row":157,"column":26},"action":"insert","lines":["t"]},{"start":{"row":157,"column":26},"end":{"row":157,"column":27},"action":"insert","lines":["i"]},{"start":{"row":157,"column":27},"end":{"row":157,"column":28},"action":"insert","lines":["o"]},{"start":{"row":157,"column":28},"end":{"row":157,"column":29},"action":"insert","lines":["n"]}],[{"start":{"row":157,"column":29},"end":{"row":157,"column":30},"action":"insert","lines":["_"],"id":1055},{"start":{"row":157,"column":30},"end":{"row":157,"column":31},"action":"insert","lines":["i"]},{"start":{"row":157,"column":31},"end":{"row":157,"column":32},"action":"insert","lines":["d"]}],[{"start":{"row":157,"column":18},"end":{"row":157,"column":19},"action":"insert","lines":["'"],"id":1056}],[{"start":{"row":157,"column":33},"end":{"row":157,"column":34},"action":"insert","lines":["'"],"id":1057}],[{"start":{"row":158,"column":4},"end":{"row":158,"column":5},"action":"insert","lines":["u"],"id":1058},{"start":{"row":158,"column":5},"end":{"row":158,"column":6},"action":"insert","lines":["s"]},{"start":{"row":158,"column":6},"end":{"row":158,"column":7},"action":"insert","lines":["e"]},{"start":{"row":158,"column":7},"end":{"row":158,"column":8},"action":"insert","lines":["r"]},{"start":{"row":158,"column":8},"end":{"row":158,"column":9},"action":"insert","lines":["_"]},{"start":{"row":158,"column":9},"end":{"row":158,"column":10},"action":"insert","lines":["i"]}],[{"start":{"row":158,"column":10},"end":{"row":158,"column":11},"action":"insert","lines":["d"],"id":1059},{"start":{"row":158,"column":11},"end":{"row":158,"column":12},"action":"insert","lines":["s"]}],[{"start":{"row":158,"column":12},"end":{"row":158,"column":13},"action":"insert","lines":["+"],"id":1060}],[{"start":{"row":158,"column":12},"end":{"row":158,"column":13},"action":"remove","lines":["+"],"id":1061}],[{"start":{"row":158,"column":12},"end":{"row":158,"column":13},"action":"insert","lines":["="],"id":1062}],[{"start":{"row":158,"column":13},"end":{"row":158,"column":33},"action":"insert","lines":["df['transaction_id']"],"id":1063}],[{"start":{"row":157,"column":4},"end":{"row":157,"column":5},"action":"insert","lines":["#"],"id":1064}],[{"start":{"row":213,"column":40},"end":{"row":214,"column":0},"action":"insert","lines":["",""],"id":1065},{"start":{"row":214,"column":0},"end":{"row":214,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":214,"column":4},"end":{"row":214,"column":57},"action":"insert","lines":["mydict = {k:v for k,v in zip(predictors,lr.coef_[0])}"],"id":1066}],[{"start":{"row":214,"column":57},"end":{"row":215,"column":0},"action":"insert","lines":["",""],"id":1067},{"start":{"row":215,"column":0},"end":{"row":215,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":214,"column":4},"end":{"row":214,"column":10},"action":"remove","lines":["mydict"],"id":1068},{"start":{"row":214,"column":4},"end":{"row":214,"column":17},"action":"insert","lines":["return_object"]}],[{"start":{"row":211,"column":4},"end":{"row":211,"column":5},"action":"insert","lines":["#"],"id":1069}],[{"start":{"row":210,"column":4},"end":{"row":210,"column":5},"action":"insert","lines":["#"],"id":1070}],[{"start":{"row":214,"column":51},"end":{"row":214,"column":62},"action":"remove","lines":["lr.coef_[0]"],"id":1071},{"start":{"row":214,"column":51},"end":{"row":214,"column":52},"action":"insert","lines":["p"]},{"start":{"row":214,"column":52},"end":{"row":214,"column":53},"action":"insert","lines":["r"]},{"start":{"row":214,"column":53},"end":{"row":214,"column":54},"action":"insert","lines":["e"]},{"start":{"row":214,"column":54},"end":{"row":214,"column":55},"action":"insert","lines":["d"]}],[{"start":{"row":214,"column":40},"end":{"row":214,"column":50},"action":"remove","lines":["predictors"],"id":1072},{"start":{"row":214,"column":40},"end":{"row":214,"column":41},"action":"insert","lines":["u"]},{"start":{"row":214,"column":41},"end":{"row":214,"column":42},"action":"insert","lines":["s"]},{"start":{"row":214,"column":42},"end":{"row":214,"column":43},"action":"insert","lines":["e"]},{"start":{"row":214,"column":43},"end":{"row":214,"column":44},"action":"insert","lines":["r"]},{"start":{"row":214,"column":44},"end":{"row":214,"column":45},"action":"insert","lines":["_"]},{"start":{"row":214,"column":45},"end":{"row":214,"column":46},"action":"insert","lines":["i"]},{"start":{"row":214,"column":46},"end":{"row":214,"column":47},"action":"insert","lines":["d"]},{"start":{"row":214,"column":47},"end":{"row":214,"column":48},"action":"insert","lines":["s"]}],[{"start":{"row":217,"column":38},"end":{"row":218,"column":0},"action":"insert","lines":["",""],"id":1073},{"start":{"row":218,"column":0},"end":{"row":218,"column":4},"action":"insert","lines":["    "]},{"start":{"row":218,"column":4},"end":{"row":218,"column":5},"action":"insert","lines":["p"]},{"start":{"row":218,"column":5},"end":{"row":218,"column":6},"action":"insert","lines":["r"]},{"start":{"row":218,"column":6},"end":{"row":218,"column":7},"action":"insert","lines":["i"]},{"start":{"row":218,"column":7},"end":{"row":218,"column":8},"action":"insert","lines":["n"]},{"start":{"row":218,"column":8},"end":{"row":218,"column":9},"action":"insert","lines":["t"]}],[{"start":{"row":218,"column":9},"end":{"row":218,"column":20},"action":"insert","lines":["pred_string"],"id":1074}],[{"start":{"row":218,"column":9},"end":{"row":218,"column":10},"action":"insert","lines":["("],"id":1075}],[{"start":{"row":218,"column":21},"end":{"row":218,"column":22},"action":"insert","lines":[")"],"id":1076}],[{"start":{"row":209,"column":4},"end":{"row":209,"column":5},"action":"insert","lines":["#"],"id":1077}],[{"start":{"row":206,"column":4},"end":{"row":206,"column":5},"action":"insert","lines":["#"],"id":1078}],[{"start":{"row":211,"column":27},"end":{"row":211,"column":66},"action":"remove","lines":["'prediction': pred, 'user_id': user_id,"],"id":1079}],[{"start":{"row":214,"column":55},"end":{"row":215,"column":0},"action":"insert","lines":["",""],"id":1080},{"start":{"row":215,"column":0},"end":{"row":215,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":215,"column":4},"end":{"row":215,"column":66},"action":"insert","lines":["return_object.update({ 'algo_id' : algo_id, 'type_' : type_ })"],"id":1081}],[{"start":{"row":219,"column":4},"end":{"row":219,"column":5},"action":"insert","lines":["#"],"id":1082}],[{"start":{"row":153,"column":52},"end":{"row":153,"column":53},"action":"insert","lines":["0"],"id":1083}],[{"start":{"row":130,"column":4},"end":{"row":130,"column":5},"action":"insert","lines":["#"],"id":1084}],[{"start":{"row":151,"column":4},"end":{"row":151,"column":5},"action":"insert","lines":["#"],"id":1085}]]},"ace":{"folds":[],"scrolltop":1574.9327392578125,"scrollleft":0,"selection":{"start":{"row":151,"column":5},"end":{"row":151,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":97,"state":"start","mode":"ace/mode/python"}},"timestamp":1714660334985,"hash":"b06c893603ae23338865173b5306a1a1ef9f6902"}